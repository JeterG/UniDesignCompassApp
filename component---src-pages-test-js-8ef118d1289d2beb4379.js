(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{172:function(e,n,t){"use strict";t.r(n);var a=t(9),r=t.n(a),s=t(0),i=t.n(s),o=t(257),u=function(e){function n(){return e.apply(this,arguments)||this}return r()(n,e),n.prototype.render=function(){return i.a.createElement(o.a,{processId:"ec468ab1-9ed8-41fe-a88a-3c85cdbc7fc6"})},n}(s.Component);n.default=u},185:function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"c",function(){return s}),t.d(n,"b",function(){return i});var a=t(30),r=function(e){return function(n){n({type:a.a,payload:e})}},s=function(e){return function(n){n({type:a.c,payload:e})}},i=function(){return function(e){e({type:a.b})}}},190:function(e,n,t){"use strict";var a=t(215),r=t.n(a),s=(t(216),t(217)),i=t.n(s),o=t(202),u=t.n(o),p="query GetUser($id: ID!) {\n  getUser(id: $id) {\n    id\n    username\n    first_name\n    last_name\n    email\n    password_hash\n    phone_number\n    processes {\n      items {\n        id\n        user_id\n        name\n        date_start\n        date_end\n      }\n      nextToken\n    }\n  }\n}\n",c="query ListUsers(\n  $filter: ModelUserFilterInput\n  $limit: Int\n  $nextToken: String\n) {\n  listUsers(filter: $filter, limit: $limit, nextToken: $nextToken) {\n    items {\n      id\n      username\n      first_name\n      last_name\n      email\n      password_hash\n      phone_number\n      processes {\n        nextToken\n      }\n    }\n    nextToken\n  }\n}\n",d="query GetProcess($id: ID!) {\n  getProcess(id: $id) {\n    id\n    phaseids {\n      items {\n        id\n        duration\n        title\n        description\n      }\n      nextToken\n    }\n    user_id\n    user {\n      id\n      username\n      first_name\n      last_name\n      email\n      password_hash\n      phone_number\n      processes {\n        nextToken\n      }\n    }\n    name\n    date_start\n    date_end\n  }\n}\n",l="query GetPhase($id: ID!) {\n  getPhase(id: $id) {\n    id\n    logs {\n      items {\n        id\n        timestamp\n        text\n      }\n      nextToken\n    }\n    duration\n    title\n    description\n    process {\n      id\n      phaseids {\n        nextToken\n      }\n      user_id\n      user {\n        id\n        username\n        first_name\n        last_name\n        email\n        password_hash\n        phone_number\n      }\n      name\n      date_start\n      date_end\n    }\n  }\n}\n",h="mutation CreateUser($input: CreateUserInput!) {\n  createUser(input: $input) {\n    id\n    username\n    first_name\n    last_name\n    email\n    password_hash\n    phone_number\n    processes {\n      items {\n        id\n        user_id\n        name\n        date_start\n        date_end\n      }\n      nextToken\n    }\n  }\n}\n",m="mutation UpdateUser($input: UpdateUserInput!) {\n  updateUser(input: $input) {\n    id\n    username\n    first_name\n    last_name\n    email\n    password_hash\n    phone_number\n    processes {\n      items {\n        id\n        user_id\n        name\n        date_start\n        date_end\n      }\n      nextToken\n    }\n  }\n}\n",f="mutation CreateProcess($input: CreateProcessInput!) {\n  createProcess(input: $input) {\n    id\n    phaseids {\n      items {\n        id\n        duration\n        title\n        description\n      }\n      nextToken\n    }\n    user_id\n    user {\n      id\n      username\n      first_name\n      last_name\n      email\n      password_hash\n      phone_number\n      processes {\n        nextToken\n      }\n    }\n    name\n    date_start\n    date_end\n  }\n}\n",_="mutation CreatePhase($input: CreatePhaseInput!) {\n  createPhase(input: $input) {\n    id\n    logs {\n      items {\n        id\n        timestamp\n        text\n      }\n      nextToken\n    }\n    duration\n    title\n    description\n    process {\n      id\n      phaseids {\n        nextToken\n      }\n      user_id\n      user {\n        id\n        username\n        first_name\n        last_name\n        email\n        password_hash\n        phone_number\n      }\n      name\n      date_start\n      date_end\n    }\n  }\n}\n",g="mutation UpdatePhase($input: UpdatePhaseInput!) {\n  updatePhase(input: $input) {\n    id\n    logs {\n      items {\n        id\n        timestamp\n        text\n      }\n      nextToken\n    }\n    duration\n    title\n    description\n    process {\n      id\n      phaseids {\n        nextToken\n      }\n      user_id\n      user {\n        id\n        username\n        first_name\n        last_name\n        email\n        password_hash\n        phone_number\n      }\n      name\n      date_start\n      date_end\n    }\n  }\n}\n",x="mutation CreateLog($input: CreateLogInput!) {\n  createLog(input: $input) {\n    id\n    timestamp\n    text\n    phase {\n      id\n      logs {\n        nextToken\n      }\n      duration\n      title\n      description\n      process {\n        id\n        user_id\n        name\n        date_start\n        date_end\n      }\n    }\n  }\n}\n",b="mutation UpdateLog($input: UpdateLogInput!) {\n  updateLog(input: $input) {\n    id\n    timestamp\n    text\n    phase {\n      id\n      logs {\n        nextToken\n      }\n      duration\n      title\n      description\n      process {\n        id\n        user_id\n        name\n        date_start\n        date_end\n      }\n    }\n  }\n}\n",y="mutation DeleteLog($input: DeleteLogInput!) {\n  deleteLog(input: $input) {\n    id\n    timestamp\n    text\n    phase {\n      id\n      logs {\n        nextToken\n      }\n      duration\n      title\n      description\n      process {\n        id\n        user_id\n        name\n        date_start\n        date_end\n      }\n    }\n  }\n}\n",w=t(194);function v(e){return k.apply(this,arguments)}function k(){return(k=i()(r.a.mark(function e(n){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.API.graphql(Object(o.graphqlOperation)(p,{id:n}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e){return q.apply(this,arguments)}function q(){return(q=i()(r.a.mark(function e(n){var t,a,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:{eq:n}},e.next=3,o.API.graphql(Object(o.graphqlOperation)(c,{filter:t}));case 3:return a=e.sent,e.next=6,v(a.data.listUsers.items[0].id);case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e){return T.apply(this,arguments)}function T(){return(T=i()(r.a.mark(function e(n){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.API.graphql(Object(o.graphqlOperation)(d,{id:n}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(e){return $.apply(this,arguments)}function $(){return($=i()(r.a.mark(function e(n){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.API.graphql(Object(o.graphqlOperation)(l,{id:n}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(e,n,t,a,r,s){return O.apply(this,arguments)}function O(){return(O=i()(r.a.mark(function e(n,t,a,s,i,u){var p,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p={username:n,first_name:t,last_name:a,email:s,password_hash:u,phone_number:i},e.next=3,o.API.graphql(Object(o.graphqlOperation)(h,{input:p}));case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e,n,t){return N.apply(this,arguments)}function N(){return(N=i()(r.a.mark(function e(n,t,a){var s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={timestamp:t,text:a,logPhaseId:n},e.next=3,o.API.graphql(Object(o.graphqlOperation)(x,{input:s}));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e,n,t,a){return C.apply(this,arguments)}function C(){return(C=i()(r.a.mark(function e(n,t,a,s){var i,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={user_id:n,name:t,date_start:a,date_end:s,processUserId:n},e.next=3,o.API.graphql(Object(o.graphqlOperation)(f,{input:i}));case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(e,n,t){return L.apply(this,arguments)}function L(){return(L=i()(r.a.mark(function e(n,t,a){var s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={title:t,description:a,duration:"0000000",phaseProcessId:n},e.next=3,o.API.graphql(Object(o.graphqlOperation)(_,{input:s}));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(e){return A.apply(this,arguments)}function A(){return(A=i()(r.a.mark(function e(n){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.API.graphql(Object(o.graphqlOperation)(m,{input:n}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e,n,t){return R.apply(this,arguments)}function R(){return(R=i()(r.a.mark(function e(n,t,a){var s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a){e.next=2;break}return e.abrupt("return",null);case 2:return s={id:n,timestamp:t,text:a},e.next=5,o.API.graphql(Object(o.graphqlOperation)(b,{input:s}));case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(e,n,t,a){return M.apply(this,arguments)}function M(){return(M=i()(r.a.mark(function e(n,t,a,s){var i,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={id:n,duration:t,title:a,description:s},e.next=3,o.API.graphql(Object(o.graphqlOperation)(g,{input:i}));case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e){return J.apply(this,arguments)}function J(){return(J=i()(r.a.mark(function e(n){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:n},e.next=3,o.API.graphql(Object(o.graphqlOperation)(y,{input:t}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function K(e,n,t){return Y.apply(this,arguments)}function Y(){return(Y=i()(r.a.mark(function e(n,t,a){var s,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(n.id,t,"0000000","00000000").then(function(e){s=e.data.createProcess},function(e){console.log(e)});case 2:i=0;case 3:if(!(i<a.length)){e.next=9;break}return e.next=6,H(s.id,a[i].title,a[i].description);case 6:i++,e.next=3;break;case 9:return e.abrupt("return",P(s.id));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}t.d(n,"g",function(){return v}),t.d(n,"h",function(){return I}),t.d(n,"f",function(){return P}),t.d(n,"e",function(){return E}),t.d(n,"c",function(){return j}),t.d(n,"a",function(){return S}),t.d(n,"k",function(){return z}),t.d(n,"i",function(){return D}),t.d(n,"j",function(){return F}),t.d(n,"d",function(){return G}),t.d(n,"b",function(){return K}),u.a.configure(w.a)},194:function(e,n,t){"use strict";n.a={aws_project_region:"us-east-1",aws_appsync_graphqlEndpoint:"https://tlpgdp57nbdkxd56oozfo5ilve.appsync-api.us-east-1.amazonaws.com/graphql",aws_appsync_region:"us-east-1",aws_appsync_authenticationType:"API_KEY",aws_appsync_apiKey:"da2-wg3engyxeran5mbkwevqwxkoeu",aws_cognito_identity_pool_id:"us-east-1:081859b3-b4f7-4f0b-832c-2d199686e884",aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_YTLNM43zQ",aws_user_pools_web_client_id:"6jjcu7qj7co9fjhu89cogi7tad",oauth:{},aws_content_delivery_bucket:"niesignompasspp-20190501181012-hostingbucket-dev",aws_content_delivery_bucket_region:"us-east-1",aws_content_delivery_url:"https://dwgjvy2m8ou08.cloudfront.net"}},204:function(e,n){},257:function(e,n,t){"use strict";t(41),t(93),t(67),t(42),t(92),t(210);var a=t(9),r=t.n(a),s=t(0),i=t.n(s),o=t(255),u=t(219),p=t.n(u),c=(t(256),function(e){function n(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(n=e.call.apply(e,[this].concat(a))||this).defaultSize={width:100,height:100},n.defaultSpec={$schema:"https://vega.github.io/schema/vega/v5.json",padding:"10",width:n.defaultSize.width,height:n.defaultSize.height,autosize:{type:"fit",contains:"padding",resize:!1},data:[{name:"table"}],signals:[{name:"tooltip",value:{},on:[{events:"rect:mouseover",update:"datum"},{events:"rect:mouseout",update:"{}"}]}],scales:[{name:"xscale",type:"band",domain:{data:"table",field:"category"},range:"width",padding:.05,round:!0},{name:"yscale",domain:{data:"table",field:"amount"},nice:!0,range:"height"}],axes:[{orient:"bottom",scale:"xscale",title:"Phase",titleFontSize:18},{orient:"left",scale:"yscale",title:"Duration (hours)",titleFontSize:18}],encoding:{x:{field:"a",type:"ordinal"},y:{field:"b",type:"quantitative"}},marks:[{type:"rect",from:{data:"table"},encode:{enter:{x:{scale:"xscale",field:"category"},width:{scale:"xscale",band:1},y:{scale:"yscale",field:"amount"},y2:{scale:"yscale",value:0}},update:{fill:{value:"steelblue"}},hover:{fill:{value:"#dc3545"}}}},{type:"text",encode:{enter:{align:{value:"center"},baseline:{value:"bottom"},fill:{value:"#333"}},update:{x:{scale:"xscale",signal:"tooltip.category",band:.5},y:{scale:"yscale",signal:"tooltip.amount",offset:-2},text:{signal:"tooltip.amount"}}}}]},n}return r()(n,e),n.prototype.render=function(){var e=this.props.spec?this.props.spec:this.defaultSpec;return e.width=this.props.width?this.props.width:this.defaultSpec.width,e.height=this.props.height?this.props.height:this.defaultSize.height,i.a.createElement(o.a,{spec:e,width:e.width,height:e.height,data:this.props.data})},n}(s.Component)),d=p()()(c),l=function(e){function n(){return e.apply(this,arguments)||this}return r()(n,e),n.prototype.render=function(){var e=this;return i.a.createElement(u.SizeMe,{render:function(n){var t=n.size;return i.a.createElement("div",null,i.a.createElement(d,{width:t.width,height:2*t.width/3,data:e.props.data}))}})},n}(s.Component),h=(t(64),t(185),t(190)),m=t(1),f=t.n(m),_=function(e){function n(n){var t;return(t=e.call(this,n)||this).edit_toggle_handler=function(){t.setState({editing:!t.state.editing})},t.update_button_handler=function(){t.props.updateHandler(t.props.logId,Date.now(),t.state.editText),t.setState({editing:!1})},t.delete_button_handler=function(){t.props.deleteHandler(t.props.logId)},t.textarea_handler=function(e){t.setState({editText:e.target.value})},t.state={deleteHandler:t.props.deleteHandler,updateHandler:t.props.updateHandler,editText:null,editing:!1},t}return r()(n,e),n.prototype.render=function(){return i.a.createElement("div",{className:"card mb-3 shadow-sm"},i.a.createElement("div",{className:"card-header"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-8 col-sm-12"},i.a.createElement("span",{className:"row"},i.a.createElement("span",{className:"col-lg-6 col-4"},this.props.phaseTitle),i.a.createElement("span",{className:"col-lg-6 col-8 text-lg-center text-right"},this.props.timestamp?new Date(parseInt(this.props.timestamp)).toLocaleString():null))),i.a.createElement("div",{className:"col-lg-4 col-sm-12 justify-content-end"},this.state.editing?i.a.createElement("span",{className:"d-flex row justify-content-end"},i.a.createElement("button",{id:"cancel",className:"btn btn-outline-primary col-lg-3",onClick:this.edit_toggle_handler},"Cancel"),i.a.createElement("span",{className:"m-1"}),i.a.createElement("button",{id:"update",className:"btn btn-outline-success col-lg-3",onClick:this.update_button_handler},"Update")):i.a.createElement("span",{className:"d-flex row row justify-content-end"},i.a.createElement("button",{id:"edit",className:"btn btn-outline-secondary col-lg-3",onClick:this.edit_toggle_handler},"Edit"),i.a.createElement("span",{className:"m-1"}),i.a.createElement("button",{id:"delete",className:"btn btn-outline-danger col-lg-3",onClick:this.delete_button_handler},"Delete"))))),i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{style:{whiteSpace:"pre-line"},className:"card-text"},this.props.text),this.state.editing?i.a.createElement("textarea",{id:"textarea",className:"form-control",rows:4,autoFocus:!0,defaultValue:this.props.text,onChange:this.textarea_handler}):null))},n}(s.Component);_.propTypes={logId:f.a.object.isRequired,phaseTitle:f.a.string.isRequired,timestamp:f.a.number.isRequired,text:f.a.string.isRequired,deleteHandler:f.a.func.isRequired,updateHandler:f.a.func.isRequired};var g=_,x=function(e){function n(n){var t;return(t=e.call(this,n)||this).deleteLogHandler=function(e){t.setState({loading:!0}),h.d(e).then(function(e){t.setState({loading:!1}),t.load_log_data(t.props.processId)})},t.updateLogHandler=function(e,n,a){t.setState({loading:!0}),a=a||"(blank entry)",h.i(e,n,a).then(function(e){t.setState({loading:!1}),t.load_log_data(t.props.processId)})},t.process_logs_render=function(){var e=t.state.selected_process_phase_logs?t.state.selected_process_phase_logs.reduce(function(e,n){var t=n.log_ids.map(function(e){return{phase_title:n.title,id:e.id,timestamp:e.timestamp,text:e.text}});return e.push.apply(e,t),e},[]).sort(function(e,n){return e.timestamp-n.timestamp}):null;return e?i.a.createElement("div",{className:""},e.map(function(e){return i.a.createElement(g,{key:e.id,logId:e.id,phaseTitle:e.phase_title,timestamp:e.timestamp,text:e.text,deleteHandler:t.deleteLogHandler,updateHandler:t.updateLogHandler})})):null},t.bar_chart_render=function(){return t.state.chartData?i.a.createElement(l,{data:t.state.chartData}):null},t.loading_render=function(){return t.state.loading?i.a.createElement("div",{style:{position:"fixed",zIndex:"1020",top:"50%",left:"50%",width:"5em",height:"5em",marginTop:"-2.5em",marginLeft:"-2.5em"},className:"spinner-grow text-info"}):null},t.state={spec:t.spec},t}r()(n,e);var t=n.prototype;return t.load_process_data=function(e){this.load_chart_data(e),this.load_log_data(e)},t.componentDidMount=function(){this.props.processId&&this.load_process_data(this.props.processId)},t.componentDidUpdate=function(e){this.props.updateComponent&&(this.load_process_data(this.props.processId),this.props.updateHandler(""))},t.msToHours=function(e){return e/1e3/60/60},t.load_chart_data=function(e){var n=this;this.setState({loading:!0}),h.f(e).then(function(e){var t=e.data.getProcess.phaseids.items.map(function(e){return{category:e.title,amount:n.msToHours(e.duration).toFixed(2)}});n.setState({loading:!1,chartData:{table:t}})})},t.load_log_data=function(e){var n=this;this.setState({loading:!0}),h.f(e).then(function(e){var t=e.data.getProcess.phaseids.items.map(function(e){return e.id});Promise.all(t.map(function(e){return h.e(e).then(function(e){var n=e.data.getPhase,t=n.logs.items;return t.sort(function(e,n){return e.timestamp-n.timestamp}),{phase_id:n.id,title:n.title,log_ids:t}})})).then(function(e){n.setState({loading:!1,selected_process_phase_logs:e})})})},t.render=function(){return i.a.createElement("div",{className:"container"},this.loading_render(),this.bar_chart_render(),this.process_logs_render())},n}(s.Component);x.propTypes={processId:f.a.string.isRequired};n.a=x}}]);
//# sourceMappingURL=component---src-pages-test-js-8ef118d1289d2beb4379.js.map